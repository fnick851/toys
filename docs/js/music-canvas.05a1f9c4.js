(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music-canvas"],{1073:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("canvas",{ref:"canvas",staticClass:"cursor-pointer",on:{click:function(i){return t.view.handleClick(i)}}})},r=[];e("4160"),e("159b");function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function o(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,i,e){return i&&o(t.prototype,i),e&&o(t,e),t}var u=function(){function t(i,e,n){a(this,t),this.context=i,this.urlList=e,this.onload=n,this.bufferList=new Array,this.loadCount=0}return s(t,[{key:"loadBuffer",value:function(t,i){var e=this,n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){e.context.decodeAudioData(n.response,(function(n){n?(e.bufferList[i]=n,++e.loadCount==e.urlList.length&&e.onload(e.bufferList)):alert("error decoding file data: "+t)}),(function(t){alert("decodeAudioData error",t)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()}},{key:"load",value:function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer("audio/".concat(this.urlList[t]),t)}}]),t}(),c=u,f=function(){function t(){a(this,t),this.gainNode=void 0,this.bufferList=void 0,this.audioContext=new(window.AudioContext||window.webkitAudioContext)}return s(t,[{key:"init",value:function(t){this.bufferList=t,this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination)}},{key:"play",value:function(t){var i=this.audioContext.createBufferSource();i.connect(this.gainNode),i.buffer=this.bufferList[t],i.start(0),i.stop(this.audioContext.currentTime+18)}}]),t}(),l=f,d=(e("cb29"),function(){function t(i,e){a(this,t),this.canvas=i,this.audio=e,this.clicks=[],this.frameRate=1e3/30,this.loopRate=4e3,this.maxRadius=80,this.audioLoop=[],this.handleClick=this.handleClick.bind(this),this.updateDisplay=this.updateDisplay.bind(this)}return s(t,[{key:"handleClick",value:function(t){var i=this,e=t.offsetX,n=t.offsetY,r=this.clicks.push({x:e,y:n,radius:0});this.audio.play(e%10),this.audioLoop.push(setInterval((function(){i.clicks[r-1].radius=0,i.audio.play(e%10)}),this.loopRate))}},{key:"updateDisplay",value:function(){var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="black",t.fillRect(0,0,this.canvas.width,this.canvas.height);for(var i=0;i<this.clicks.length;i++){var e=this.clicks[i];if(!(e.radius>this.maxRadius)){e.radius+=1;var n=.7;e.radius>this.maxRadius-15&&(n=(this.maxRadius-e.radius)/10),this.drawCircle(t,e.x,e.y,e.radius,n)}}}},{key:"drawCircle",value:function(t,i,e,n,r){t.beginPath(),t.arc(i,e,n,0,2*Math.PI),t.fillStyle="rgba("+i%256+", "+e%256+", "+i*e%256+" ,"+r+")",t.fill()}}]),t}()),h=d,v={name:"MusicCanvas",data:function(){return{audio:new l,view:null,displayLoop:null}},created:function(){var t=this;new c(this.audio.audioContext,["A4.mp3","A5.mp3","C4.mp3","C5.mp3","D4.mp3","D5.mp3","E4.mp3","E5.mp3","G4.mp3","G5.mp3"],(function(i){t.audio.init(i),t.view=new h(t.$refs.canvas,t.audio),t.displayLoop=setInterval(t.view.updateDisplay,t.view.frameRate)})).load()},mounted:function(){var t=this,i=function(){t.$refs.canvas.width=window.innerWidth,t.$refs.canvas.height=window.innerHeight};i(),window.onresize=i},beforeDestroy:function(){this.view.audioLoop.forEach((function(t){return clearInterval(t)})),clearInterval(this.displayLoop),window.onresize=null}},p=v,y=e("2877"),L=Object(y["a"])(p,n,r,!1,null,null,null);i["default"]=L.exports},"159b":function(t,i,e){var n=e("da84"),r=e("fdbc"),a=e("17c2"),o=e("9112");for(var s in r){var u=n[s],c=u&&u.prototype;if(c&&c.forEach!==a)try{o(c,"forEach",a)}catch(f){c.forEach=a}}},"17c2":function(t,i,e){"use strict";var n=e("b727").forEach,r=e("a640"),a=e("ae40"),o=r("forEach"),s=a("forEach");t.exports=o&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,i,e){"use strict";var n=e("23e7"),r=e("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"65f0":function(t,i,e){var n=e("861d"),r=e("e8b5"),a=e("b622"),o=a("species");t.exports=function(t,i){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)?n(e)&&(e=e[o],null===e&&(e=void 0)):e=void 0),new(void 0===e?Array:e)(0===i?0:i)}},"81d5":function(t,i,e){"use strict";var n=e("7b0b"),r=e("23cb"),a=e("50c4");t.exports=function(t){var i=n(this),e=a(i.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,e),u=o>2?arguments[2]:void 0,c=void 0===u?e:r(u,e);while(c>s)i[s++]=t;return i}},a640:function(t,i,e){"use strict";var n=e("d039");t.exports=function(t,i){var e=[][t];return!!e&&n((function(){e.call(null,i||function(){throw 1},1)}))}},ae40:function(t,i,e){var n=e("83ab"),r=e("d039"),a=e("5135"),o=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,i){if(a(s,t))return s[t];i||(i={});var e=[][t],c=!!a(i,"ACCESSORS")&&i.ACCESSORS,f=a(i,0)?i[0]:u,l=a(i,1)?i[1]:void 0;return s[t]=!!e&&!r((function(){if(c&&!n)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:u}):t[1]=1,e.call(t,f,l)}))}},b727:function(t,i,e){var n=e("0366"),r=e("44ad"),a=e("7b0b"),o=e("50c4"),s=e("65f0"),u=[].push,c=function(t){var i=1==t,e=2==t,c=3==t,f=4==t,l=6==t,d=5==t||l;return function(h,v,p,y){for(var L,b,w=a(h),m=r(w),g=n(v,p,3),C=o(m.length),x=0,S=y||s,k=i?S(h,C):e?S(h,0):void 0;C>x;x++)if((d||x in m)&&(L=m[x],b=g(L,x,w),t))if(i)k[x]=b;else if(b)switch(t){case 3:return!0;case 5:return L;case 6:return x;case 2:u.call(k,L)}else if(f)return!1;return l?-1:c||f?f:k}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},cb29:function(t,i,e){var n=e("23e7"),r=e("81d5"),a=e("44d2");n({target:"Array",proto:!0},{fill:r}),a("fill")},e8b5:function(t,i,e){var n=e("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},fdbc:function(t,i){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=music-canvas.05a1f9c4.js.map