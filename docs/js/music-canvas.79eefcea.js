(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music-canvas"],{1073:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("canvas",{ref:"canvas",on:{click:function(i){return t.playNote(i)}}})},a=[];function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}var u=function(){function t(i,e,n){o(this,t),this.context=i,this.urlList=e,this.onload=n,this.bufferList=new Array,this.loadCount=0}return r(t,[{key:"loadBuffer",value:function(t,i){var e=this,n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){e.context.decodeAudioData(n.response,(function(n){n?(e.bufferList[i]=n,++e.loadCount==e.urlList.length&&e.onload(e.bufferList)):alert("error decoding file data: "+t)}),(function(t){alert("decodeAudioData error",t)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()}},{key:"load",value:function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer("audio/".concat(this.urlList[t]),t)}}]),t}(),c=u,l=function(){function t(){o(this,t),this.gainNode=void 0,this.bufferList=void 0,this.audioContext=new(window.AudioContext||window.webkitAudioContext)}return r(t,[{key:"init",value:function(t){this.bufferList=t,this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination)}},{key:"play",value:function(t){var i=this.audioContext.createBufferSource();i.connect(this.gainNode),i.buffer=this.bufferList[t],i.start(0),i.stop(this.audioContext.currentTime+18)}}]),t}(),d=l,f=(e("cb29"),function(){function t(i,e){o(this,t),this.canvas=i,this.audio=e,this.clicks=[],this.frameRate=1e3/30,this.loopRate=4e3,this.maxRadius=80}return r(t,[{key:"handleClick",value:function(t){var i=this,e=t.offsetX,n=t.offsetY,a=this.clicks.push({x:e,y:n,radius:0});this.audio.play(e%10),setInterval((function(){i.clicks[a-1].radius=0,i.audio.play(e%10)}),this.loopRate)}},{key:"updateDisplay",value:function(){var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="black",t.fillRect(0,0,this.canvas.width,this.canvas.height);for(var i=0;i<this.clicks.length;i++){var e=this.clicks[i];if(!(e.radius>this.maxRadius)){e.radius+=1;var n=.7;e.radius>this.maxRadius-15&&(n=(this.maxRadius-e.radius)/10),this.drawCircle(t,e.x,e.y,e.radius,n)}}}},{key:"drawCircle",value:function(t,i,e,n,a){t.beginPath(),t.arc(i,e,n,0,2*Math.PI),t.fillStyle="rgba("+i%256+", "+e%256+", "+i*e%256+" ,"+a+")",t.fill()}}]),t}()),h=f,v={name:"MusicCanvas",data:function(){return{audio:new d,view:{handleClick:function(){}}}},created:function(){var t=this;new c(this.audio.audioContext,["A4.mp3","A5.mp3","C4.mp3","C5.mp3","D4.mp3","D5.mp3","E4.mp3","E5.mp3","G4.mp3","G5.mp3"],(function(i){t.audio.init(i),t.view=new h(t.$refs.canvas,t.audio)})).load()},mounted:function(){var t=this,i=function(){t.$refs.canvas.width=window.innerWidth,t.$refs.canvas.height=window.innerHeight};i(),window.onresize=i},methods:{playNote:function(t){this.view.handleClick.bind(this.view),this.view.handleClick(t)}},watch:{view:function(t){t.updateDisplay&&t.frameRate&&setInterval(this.view.updateDisplay.bind(this.view),this.view.frameRate)}}},p=v,w=e("2877"),b=Object(w["a"])(p,n,a,!1,null,null,null);i["default"]=b.exports},"81d5":function(t,i,e){"use strict";var n=e("7b0b"),a=e("23cb"),o=e("50c4");t.exports=function(t){var i=n(this),e=o(i.length),s=arguments.length,r=a(s>1?arguments[1]:void 0,e),u=s>2?arguments[2]:void 0,c=void 0===u?e:a(u,e);while(c>r)i[r++]=t;return i}},cb29:function(t,i,e){var n=e("23e7"),a=e("81d5"),o=e("44d2");n({target:"Array",proto:!0},{fill:a}),o("fill")}}]);
//# sourceMappingURL=music-canvas.79eefcea.js.map